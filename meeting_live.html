<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Meeting – Deepak × AI Bhai</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      background: #000814;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }

    .section-box {
      background: linear-gradient(145deg, #0a0f23, #111);
      box-shadow: 0 0 15px #00f7ff70;
      padding: 20px;
      border-radius: 15px;
      margin: 30px auto;
      max-width: 800px;
      position: relative;
    }

    .signature {
      text-align: right;
      font-weight: bold;
      color: #00f7ff;
      margin-top: 15px;
    }

    .copy-button, .share-button {
      position: absolute;
      top: 10px;
      z-index: 10;
    }

    .copy-button { left: 10px; }
    .share-button { right: 10px; }

    .copy-button button, .share-button button {
      background: #00ffaa;
      border: none;
      border-radius: 6px;
      padding: 6px 12px;
      font-weight: bold;
      color: #000;
      cursor: pointer;
    }

    #countdownTimer {
      font-size: 22px;
      text-align: center;
      color: #00f7ff;
    }

    .comment-box {
      background: #111;
      box-shadow: 0 0 20px #00ffaa70;
      padding: 20px;
      border-radius: 12px;
      max-width: 800px;
      margin: 40px auto;
    }

    .comment-box input, .comment-box textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 6px;
      border: none;
      font-size: 16px;
    }

    .comment-box button {
      background: #00ffaa;
      color: black;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
    }

    .ads-container {
      max-width: 800px;
      margin: 20px auto;
      padding: 10px;
      background: #0b0f1c;
      box-shadow: 0 0 20px #00f7ff40;
      border-radius: 10px;
    }
  </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6575643228502924" crossorigin="anonymous"></script>
</head>
<body>

  <!-- Top Shayari Section -->
  <div class="section-box">
    <div class="copy-button"><button onclick="copyText(topText)">कॉपी</button></div>
    <div class="share-button"><button onclick="shareText(topText)">शेयर</button></div>
    <div id="topTextContent"></div>
    <div class="signature">Deepak Chauhan × AI Bhai</div>
  </div>

  <!-- Ad 1 -->
  <div class="ads-container">
    <ins class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-client="ca-pub-6575643228502924"
      data-ad-slot="5484922049"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
  </div>

  <!-- Video or Countdown -->
  <div id="video-section" class="section-box">
    <div id="videoEmbed"></div>
    <div class="signature">Deepak Chauhan × AI Bhai</div>
  </div>

  <!-- Ad 2 -->
  <div class="ads-container">
    <ins class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-client="ca-pub-6575643228502924"
      data-ad-slot="5484922049"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
  </div>

  <!-- Bottom Shayari Section -->
  <div class="section-box">
    <div class="copy-button"><button onclick="copyText(bottomText)">कॉपी</button></div>
    <div class="share-button"><button onclick="shareText(bottomText)">शेयर</button></div>
    <div id="bottomTextContent"></div>
    <div class="signature">Deepak Chauhan × AI Bhai</div>
  </div>

  <!-- Comments -->
  <div class="comment-box">
    <input type="text" id="userName" placeholder="आपका नाम">
    <textarea id="userComment" rows="3" placeholder="अपना कमेंट लिखें..."></textarea>
    <button onclick="submitComment()">कमेंट सबमिट करें</button>
    <div id="commentsList" style="margin-top: 20px;"></div>
  </div>

<script>
  let topText = "", bottomText = "", entry = {};

  fetch("https://script.google.com/macros/s/AKfycbzu4qIv1yviT49_KPjnhdfQTpbkrbUUvZB3D-Eqq-eUZK9IFn461IeQU_K4f6pkPC05/exec")
    .then(res => res.json())
    .then(data => {
      if (data.length > 0) {
        entry = data[0];
        topText = entry.TopDialog;
        bottomText = entry.BottomDialog;
        document.getElementById("topTextContent").innerText = topText;
        document.getElementById("bottomTextContent").innerText = bottomText;
        setupCountdownOrVideo(entry);
      }
    });

  function setupCountdownOrVideo(entry) {
    const container = document.getElementById("videoEmbed");
    const target = new Date(entry.MeetingDateTime).getTime();
    const now = Date.now();

    if (entry.ShowVideo.toLowerCase() === "yes" && now >= target) {
      loadVideo(entry.VideoURL);
    } else if (now < target) {
      const countdown = document.createElement("div");
      countdown.setAttribute("id", "countdownTimer");
      container.appendChild(countdown);

      const timer = setInterval(() => {
        const now = Date.now();
        const diff = target - now;
        if (diff <= 0) {
          clearInterval(timer);
          container.innerHTML = "";
          loadVideo(entry.VideoURL);
        } else {
          const d = Math.floor(diff / (1000 * 60 * 60 * 24));
          const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
          const s = Math.floor((diff % (1000 * 60)) / 1000);
          countdown.innerHTML = `<p>Meeting Starts In:</p><strong>${d}d ${h}h ${m}m ${s}s</strong>`;
        }
      }, 1000);
    } else {
      container.innerHTML = "<div style='text-align:center; color: #ccc;'>Meeting Over. Stay tuned!</div>";
    }
  }

  function loadVideo(url) {
    const embedURL = url.includes("youtube.com") ? url.replace("watch?v=", "embed/") : url;
    const videoTag = url.includes("youtube.com")
      ? `<iframe width='100%' height='400' src='${embedURL}' frameborder='0' allowfullscreen></iframe>`
      : `<video width='100%' height='400' controls><source src='${embedURL}' type='video/mp4'></video>`;
    document.getElementById("videoEmbed").innerHTML = videoTag;
  }

  function copyText(text) {
    navigator.clipboard.writeText(text);
    alert("कॉपी किया गया: " + text);
  }

  function shareText(text) {
    if (navigator.share) {
      navigator.share({ text: text });
    } else {
      alert("शेयरिंग इस डिवाइस पर सपोर्टेड नहीं है");
    }
  }

  const firebaseConfig = {
    apiKey: "AIzaSyAT8qbxGsbG_28uVUWmCmXeFH8wQmbvVZQ",
    authDomain: "vip-team-bhai-x-ai.firebaseapp.com",
    databaseURL: "https://vip-team-bhai-x-ai-default-rtdb.firebaseio.com",
    projectId: "vip-team-bhai-x-ai",
    storageBucket: "vip-team-bhai-x-ai.appspot.com",
    messagingSenderId: "984650632826",
    appId: "1:984650632826:web:7e3b8167fb5979537535c3"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  function submitComment() {
    const name = document.getElementById("userName").value.trim();
    const comment = document.getElementById("userComment").value.trim();
    if (!name || !comment) {
      alert("नाम और कमेंट दोनों ज़रूरी हैं!");
      return;
    }
    db.ref("comments").push({ name, comment, timestamp: Date.now() });
    document.getElementById("userName").value = "";
    document.getElementById("userComment").value = "";
  }

  db.ref("comments").on("child_added", function(snapshot) {
    const data = snapshot.val();
    const commentEl = document.createElement("p");
    commentEl.innerHTML = `<strong>${data.name}:</strong> ${data.comment}`;
    document.getElementById("commentsList").prepend(commentEl);
  });

  // Only push ads after DOM is ready
  window.addEventListener('load', function () {
    (adsbygoogle = window.adsbygoogle || []).push({});
    (adsbygoogle = window.adsbygoogle || []).push({});
  });
</script>

</body>
</html>
