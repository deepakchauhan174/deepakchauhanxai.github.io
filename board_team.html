<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Member Page</title>
<style>
.image-card { border:1px solid #ccc; padding:10px; margin:10px; display:inline-block; }
</style>
<script>
async function loadImages(user_id){
    let res = await fetch(`https://deepakchauhanxai.xyz/pinterest/fetch_images.php?user_id=${user_id}`);
    let images = await res.json();
    let container = document.getElementById('images');
    container.innerHTML = '';
    images.forEach(img => {
        let div = document.createElement('div');
        div.classList.add('image-card');
        div.innerHTML = `
            <img src="${img.image_url}" width="150"><br>
            <strong>${img.title}</strong><br>
            <p>${img.description}</p>
            <button onclick="upload(${img.id}, ${user_id})">Upload to Pinterest</button>
        `;
        container.appendChild(div);
    });
}

async function upload(image_id, user_id){
    let formData = new FormData();
    formData.append('image_id', image_id);
    formData.append('user_id', user_id);

    let res = await fetch('https://deepakchauhanxai.xyz/pinterest/pinterest_upload.php',{
        method:'POST', body: formData
    });
    let result = await res.json();
    alert("Uploaded: " + JSON.stringify(result));
}

window.onload = function(){
    let user_id = 1; // Login/session से dynamic set
    loadImages(user_id);
}
</script>
</head>
<body>
<h1>Member Page</h1>
<div id="images"></div>
</body>
</html>
